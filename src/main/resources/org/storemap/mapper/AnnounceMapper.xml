<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.storemap.mapper.AnnounceMapper">
	<select id="getNotice" resultType="org.storemap.domain.AnnounceVO">
		<![CDATA[
		SELECT * FROM (
			SELECT 
				ANNOUNCE_IDX, 
				ANNOUNCE_TITLE, 
				ANNOUNCE_REGDATE, 
				ROWNUM RN
			FROM (
				SELECT 
					ANNOUNCE_IDX, 
					ANNOUNCE_TITLE, 
					ANNOUNCE_REGDATE
		    	FROM 
			    	ANNOUNCE
			    ORDER BY 
			    	ANNOUNCE_IDX 
		    	DESC
	    	)
		    WHERE ROWNUM <= #{cri.pageNum} * #{cri.amount}
	    )
	    WHERE RN > (#{cri.pageNum} - 1) * #{cri.amount}
	    ]]>
	</select>
	
	<select id="getListCount" resultType="int" parameterType="org.storemap.domain.FilterVO">
		SELECT COUNT(*) FROM ANNOUNCE
	</select>
</mapper>
